# This program extracts observations from decks 118, 119, and 762 from the
# ICOADS. These three decks make up the Kobe Collection.
#
# This program returns the following IMMA fields, separated by commas:
#
# - Year
# - Month
# - Day
# - Hour
# - Latitude
# - Longitude
# - Identification / callsign
# - Deck
#

BEGIN { OFS=","; FIELDWIDTHS="4 2 2 4 5 6 2 1 1 1 1 1 2 2 9 2 63 2 2 1 3 2 3" }
{
    if ($23 == 118 || $23 == 119 || $23 == 762)   # Extract matching decks
        print $1, $2, $3, $4, $5, $6, $15, $23    # Print selected fields
}

# The above program can be modified to extract alternative decks or to print
# any of the following fields (use the number under "Awk field"):
#
# +---------+---------+-------+-------+-----------+---------------------------+
# | IMMA    | Table   | Abbr. | Field | Awk field | Data                      |
# | Table   | No.     |       | Width |           |                           |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       1,|    YR |     4 |        $1 | Year                      |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       2,|    MO |     2 |        $2 | Month                     |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       3,|    DY |     2 |        $3 | Day                       |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       4,|    HR |     4 |        $4 | Hour                      |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       5,|   LAT |     5 |        $5 | Latitude                  |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       6,|   LON |     6 |        $6 | Longitude                 |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       7,|    IM |     2 |        $7 | IMMA version              |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       8,|  ATTC |     1 |        $8 | Attachment count          |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |       9,|    TI |     1 |        $9 | Time indicator            |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |      10,|    LI |     1 |       $10 | Lat/long indicator        |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |      11,|    DS |     1 |       $11 | Ship course               |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |      12,|    VS |     1 |       $12 | Ship speed                |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |      13,|   NID |     2 |       $13 | National source indicator |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |      14,|    II |     2 |       $14 | ID indicator              |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |      15,|    ID |     9 |       $15 | Identification/callsign   |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |      16,|    C1 |     2 |       $16 | Country code              |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C0       |  17--48,|       |    63 |       $17 | Regular section fields    |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C1       |       1,|  ATTI |     2 |       $18 | Attachment ID             |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C1       |       2,|  ATTL |     2 |       $19 | Attachment length         |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C1       |       3,|   BSI |     1 |       $20 | Box system indicator      |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C1       |       4,|   B10 |     3 |       $21 | 10 degree box number      |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C1       |       5,|    B1 |     2 |       $22 | 1 degree box number       |
# +---------+---------+-------+-------+-----------+---------------------------+
# |C1       |       6,|   DCK |     3 |       $23 | Deck                      |
# +---------+---------+-------+-------+-----------+---------------------------+
